import{c as N,r as o,j as e,d as g,g as V,B as E,h as z,i as Q,R as U}from"./main-99bb4b09.js";import{C as Z,a as J,V as W,W as Y,B as R,S as k,i as O,Y as y,M as G,k as h,c as j,d as u,e as C,g as K,f,h as $,P as X,l as ee,x as T,y as _,Z as se,z as M,_ as ae,$ as te,a0 as le,a1 as re,a2 as m,a3 as ne,L as A,O as ie}from"./badge-e5e69992.js";import{c as i,B as p,I as de,b as ce}from"./loading-spinner-1f4ff308.js";import{P as D}from"./package-fc788644.js";import{U as oe}from"./user-2488036d.js";import{D as xe,a as me,b as he,c as je,P as ue}from"./dropdown-menu-b3a63304.js";import{S as c}from"./skeleton-e5d5cc1c.js";import{E as fe}from"./ellipsis-vertical-2febadca.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],ge=N("Box",pe);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ye=N("Eye",Ne);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],ve=N("Receipt",be);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],I=N("Tag",we);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],L=N("Truck",Ce),F=o.forwardRef(({className:s,...t},l)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:l,className:i("w-full caption-bottom text-sm",s),...t})}));F.displayName="Table";const q=o.forwardRef(({className:s,...t},l)=>e.jsx("thead",{ref:l,className:i("[&_tr]:border-b",s),...t}));q.displayName="TableHeader";const H=o.forwardRef(({className:s,...t},l)=>e.jsx("tbody",{ref:l,className:i("[&_tr:last-child]:border-0",s),...t}));H.displayName="TableBody";const Se=o.forwardRef(({className:s,...t},l)=>e.jsx("tfoot",{ref:l,className:i("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...t}));Se.displayName="TableFooter";const S=o.forwardRef(({className:s,...t},l)=>e.jsx("tr",{ref:l,className:i("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...t}));S.displayName="TableRow";const b=o.forwardRef(({className:s,...t},l)=>e.jsx("th",{ref:l,className:i("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...t}));b.displayName="TableHead";const v=o.forwardRef(({className:s,...t},l)=>e.jsx("td",{ref:l,className:i("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...t}));v.displayName="TableCell";const Oe=o.forwardRef(({className:s,...t},l)=>e.jsx("caption",{ref:l,className:i("mt-4 text-sm text-muted-foreground",s),...t}));Oe.displayName="TableCaption";function De(s){return typeof s!="number"?"$0.00":`$${s.toFixed(2)}`}function Te(s){if(!s)return"N/A";try{return h(new Date(s),"MMM d, yyyy")}catch{return"Invalid Date"}}function _e(){var n;const{currentOrder:s,setCurrentOrder:t,isOrderDialogOpen:l,setIsOrderDialogOpen:a}=g(),r=()=>{a(!1),t(null)};return s?e.jsx(Z,{open:l,onOpenChange:r,children:e.jsxs(J,{className:"h-screen w-screen",children:[e.jsx(W,{className:"px-6 pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Y,{className:"text-2xl",children:["Order #",V.str(s._id)]}),e.jsx(R,{variant:"outline",className:i("text-base",{"border-green-300 bg-green-50 text-green-700":s.status==="completed","border-yellow-300 bg-yellow-50 text-yellow-700":s.status==="pending","border-blue-300 bg-blue-50 text-blue-700":s.status==="partially_filled","border-purple-300 bg-purple-50 text-purple-700":s.status==="partially_shipped","border-indigo-300 bg-indigo-50 text-indigo-700":s.status==="shipped","border-orange-300 bg-orange-50 text-orange-700":s.status==="partially_completed"}),children:s.status})]})}),e.jsx(k,{className:"h-full px-6",children:e.jsxs("div",{className:"flex flex-col gap-6 pb-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"flex items-center gap-2 rounded-lg border p-4",children:[e.jsx(D,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Items"}),e.jsx("p",{className:"text-2xl font-bold",children:s.items.length})]})]}),e.jsxs("div",{className:"flex items-center gap-2 rounded-lg border p-4",children:[e.jsx(I,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold",children:De(s.totalPrice)})]})]}),e.jsxs("div",{className:"flex items-center gap-2 rounded-lg border p-4",children:[e.jsx(O,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Created"}),e.jsx("p",{className:"text-sm font-medium",children:Te(s.createdAt)})]})]})]}),s.jobSite&&e.jsxs(e.Fragment,{children:[e.jsx(y,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Job Site Details"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:s.jobSite.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[s.jobSite.address.streetAddress,", ",s.jobSite.address.city]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:s.jobSite.contact.name})]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:s.jobSite.contact.phone})]})]})]})]}),((n=s.jobSite)==null?void 0:n.deliveryInstructions)&&e.jsxs(e.Fragment,{children:[e.jsx(y,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Instructions"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.jobSite.deliveryInstructions.instructions}),s.jobSite.deliveryInstructions.specialRequirements&&e.jsxs("div",{className:"mt-2",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Special Requirements"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.jobSite.deliveryInstructions.specialRequirements})]})]})]}),(s.notes||s.additionalNotes)&&e.jsxs(e.Fragment,{children:[e.jsx(y,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Notes"}),s.notes&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium",children:"Order Notes"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.notes})]}),s.additionalNotes&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium",children:"Additional Notes"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.additionalNotes})]})]})]}),e.jsx(y,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-4 text-lg font-semibold",children:"Items"}),e.jsx("div",{className:"overflow-hidden rounded-md border",children:e.jsxs(F,{children:[e.jsx(q,{children:e.jsxs(S,{children:[e.jsx(b,{children:"Item"}),e.jsx(b,{className:"text-right",children:"Quantity"}),e.jsx(b,{className:"text-right",children:"Unit"})]})}),e.jsx(H,{children:s.items.map((x,w)=>e.jsxs(S,{children:[e.jsx(v,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:x.name}),x.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:x.description})]})}),e.jsx(v,{className:"text-right",children:x.quantity}),e.jsx(v,{className:"text-right",children:x.unit})]},`${s._id}-item-${w}`))})]})})]}),e.jsx("div",{className:"flex justify-end gap-2",children:e.jsx(p,{variant:"outline",onClick:r,children:"Close"})})]})})]})}):null}function Me(s){return typeof s!="number"?"$0.00":`$${s.toFixed(2)}`}function Ae(s){if(!s)return"N/A";try{return h(new Date(s),"MMM d, yyyy")}catch{return"Invalid Date"}}function Le({order:s,onSelect:t}){const l=s!=null&&s._id?`#${z.str(s._id)}`:"N/A",a=Array.isArray(s==null?void 0:s.items)?s.items.length:0,r=(s==null?void 0:s.status)||"pending";return e.jsxs(j,{className:"group relative overflow-hidden transition-all hover:shadow-md",children:[e.jsx(u,{className:"pb-2",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(C,{className:"flex items-center gap-2 text-lg",children:[e.jsx(ge,{className:"h-5 w-5 text-muted-foreground"}),"Order ",l]}),e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4"}),a," items"]})]}),e.jsxs(xe,{children:[e.jsx(me,{asChild:!0,children:e.jsx(p,{variant:"ghost",size:"icon",children:e.jsx(fe,{className:"h-4 w-4"})})}),e.jsx(he,{align:"end",children:e.jsxs(je,{onClick:()=>s&&t(s),children:[e.jsx(ye,{className:"mr-2 h-4 w-4"}),"View Details"]})})]})]})}),e.jsx(f,{className:"pb-2",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(I,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:Me(s==null?void 0:s.totalPrice)})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(R,{variant:"outline",className:i({"border-green-300 bg-green-50 text-green-700":r==="completed","border-yellow-300 bg-yellow-50 text-yellow-700":r==="pending","border-blue-300 bg-blue-50 text-blue-700":r==="partially_filled","border-purple-300 bg-purple-50 text-purple-700":r==="partially_shipped","border-indigo-300 bg-indigo-50 text-indigo-700":r==="shipped","border-orange-300 bg-orange-50 text-orange-700":r==="partially_completed"}),children:r})})]})}),e.jsxs($,{className:"flex items-center justify-between border-t bg-muted/40 pt-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(O,{className:"h-4 w-4"}),"Created ",Ae(s==null?void 0:s.createdAt)]}),e.jsx(p,{variant:"secondary",size:"sm",onClick:()=>s&&t(s),children:"View Details"})]})]})}function Pe(){return e.jsxs(j,{children:[e.jsx(u,{className:"pb-2",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{className:"h-6 w-48"}),e.jsx(c,{className:"h-4 w-64"})]})})}),e.jsx(f,{className:"pb-2",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{className:"h-4 w-32"}),e.jsx(c,{className:"h-5 w-24"})]})}),e.jsxs($,{className:"flex items-center justify-between border-t pt-3",children:[e.jsx(c,{className:"h-4 w-32"}),e.jsx(c,{className:"h-8 w-24"})]})]})}function Re(){const{orders:s,isLoading:t,setCurrentOrder:l,setIsOrderDialogOpen:a}=g();if(t)return e.jsx("div",{className:"grid gap-4 p-4 md:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((n,x)=>e.jsx(Pe,{},x))});if(!Array.isArray(s)||s.length===0)return e.jsx("div",{className:"flex h-[300px] items-center justify-center rounded-md border",children:e.jsx("p",{className:"text-muted-foreground",children:"No orders found"})});const r=n=>{n&&(l(n),a(!0))};return e.jsx(k,{className:"h-[calc(100vh-450px)]",children:e.jsx("div",{className:"grid gap-4 p-4 md:grid-cols-2 lg:grid-cols-3",children:s.map(n=>n&&e.jsx(Le,{order:n,onSelect:r},n._id))})})}function ke(){const{setCurrentOrder:s,setIsOrderDialogOpen:t}=g(),{requireProfile:l}=Q(),a=()=>{l()&&(s(null),t(!0))};return e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(p,{onClick:a,children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),"Add Order"]})})}function $e(){const{searchTerm:s,setSearchTerm:t,setFilterStatus:l,setDateRange:a}=g(),[r,n]=o.useState({from:void 0,to:void 0}),x=d=>{t(d)},w=d=>{l(d)},B=d=>{n(d),a(d.from?h(d.from,"yyyy-MM-dd"):null,d.to?h(d.to,"yyyy-MM-dd"):null)};return e.jsx("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:e.jsxs("div",{className:"flex w-full items-center gap-2 md:w-auto",children:[e.jsxs("div",{className:"relative flex-1 md:w-[300px] md:flex-none",children:[e.jsx(ee,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(de,{placeholder:"Search orders...",value:s,onChange:d=>x(d.target.value),className:"pl-8"})]}),e.jsxs(T,{children:[e.jsx(_,{asChild:!0,children:e.jsx(p,{variant:"outline",size:"icon",children:e.jsx(se,{className:"h-4 w-4"})})}),e.jsx(M,{className:"w-80",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium leading-none",children:"Filters"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Filter orders by status and date range"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"grid gap-1",children:[e.jsx("label",{className:"text-sm font-medium leading-none",children:"Status"}),e.jsxs(ae,{onValueChange:w,children:[e.jsx(te,{children:e.jsx(le,{placeholder:"Select status"})}),e.jsxs(re,{children:[e.jsx(m,{value:"all",children:"All"}),e.jsx(m,{value:"pending",children:"Pending"}),e.jsx(m,{value:"partially_filled",children:"Partially Filled"}),e.jsx(m,{value:"partially_shipped",children:"Partially Shipped"}),e.jsx(m,{value:"shipped",children:"Shipped"}),e.jsx(m,{value:"partially_completed",children:"Partially Completed"}),e.jsx(m,{value:"completed",children:"Completed"})]})]})]}),e.jsxs("div",{className:"grid gap-1",children:[e.jsx("label",{className:"text-sm font-medium leading-none",children:"Date Range"}),e.jsxs(T,{children:[e.jsx(_,{asChild:!0,children:e.jsxs(p,{variant:"outline",className:"justify-start text-left font-normal",children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),r.from?r.to?e.jsxs(e.Fragment,{children:[h(r.from,"LLL dd, y")," -"," ",h(r.to,"LLL dd, y")]}):h(r.from,"LLL dd, y"):e.jsx("span",{children:"Pick a date range"})]})}),e.jsx(M,{className:"w-auto p-0",align:"end",children:e.jsx(ne,{initialFocus:!0,mode:"range",defaultMonth:r.from,selected:r,onSelect:B,numberOfMonths:2})})]})]})]})]})})]})]})})}const P={"Total Orders":e.jsx(D,{className:"h-4 w-4 text-muted-foreground"}),Shipping:e.jsx(L,{className:"h-4 w-4 text-muted-foreground"}),Shipped:e.jsx(L,{className:"h-4 w-4 text-muted-foreground"}),"Total Savings":e.jsx(ve,{className:"h-4 w-4 text-muted-foreground"})};function Ie(){const{quickLookups:s,isLoading:t,fetchQuickLookups:l}=g();return U.useEffect(()=>{l()},[l]),t?e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"flex flex-row gap-4",children:Array.from({length:2}).map((a,r)=>e.jsxs(j,{className:"flex-1 overflow-hidden",children:[e.jsx(u,{className:"space-y-0 pb-2",children:e.jsx(c,{className:"h-4 w-32"})}),e.jsx(f,{children:e.jsx(c,{className:"h-8 w-20"})})]},r))}),e.jsx("div",{className:"flex flex-row gap-4",children:Array.from({length:2}).map((a,r)=>e.jsxs(j,{className:"flex-1 overflow-hidden",children:[e.jsx(u,{className:"space-y-0 pb-2",children:e.jsx(c,{className:"h-4 w-32"})}),e.jsx(f,{children:e.jsx(c,{className:"h-8 w-20"})})]},r+2))})]}):e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"flex flex-row gap-4",children:s.slice(0,2).map((a,r)=>e.jsxs(j,{className:"flex-1 overflow-hidden transition-colors hover:bg-muted/50",children:[e.jsx(u,{className:"flex flex-row items-center justify-start space-x-2 pb-2",children:e.jsxs(C,{className:"flex w-full flex-row items-center justify-between space-x-2 text-sm font-medium",children:[e.jsxs("div",{children:[" ",a.title]}),P[a.title]||null]})}),e.jsx(f,{children:e.jsxs("div",{className:"text-2xl font-bold",children:[typeof a.value=="number"?a.value.toLocaleString():a.value,a.trend&&e.jsxs("span",{className:i("ml-2 text-sm",{"text-green-500":a.trend==="up","text-red-500":a.trend==="down","text-gray-500":a.trend==="neutral"}),children:["(",a.change>0?"+":"",a.change,"%)"]})]})})]},`lookup-${r}`))}),e.jsx("div",{className:"flex flex-row gap-4",children:s.slice(2,4).map((a,r)=>e.jsxs(j,{className:"flex-1 overflow-hidden transition-colors hover:bg-muted/50",children:[e.jsx(u,{className:"flex flex-row items-center justify-start space-x-2 pb-2",children:e.jsxs(C,{className:"flex w-full flex-row items-center justify-between space-x-2 text-sm font-medium",children:[e.jsxs("div",{children:[" ",a.title]}),P[a.title]||null]})}),e.jsx(f,{children:e.jsxs("div",{className:"text-2xl font-bold",children:[typeof a.value=="number"?a.value.toLocaleString():a.value,a.trend&&e.jsxs("span",{className:i("ml-2 text-sm",{"text-green-500":a.trend==="up","text-red-500":a.trend==="down","text-gray-500":a.trend==="neutral"}),children:["(",a.change>0?"+":"",a.change,"%)"]})]})})]},`lookup-${r+2}`))})]})}function Ue(){const{fetchOrders:s,fetchQuickLookups:t,isLoading:l}=g();return o.useEffect(()=>{s(),t()},[s,t]),l?e.jsx(A,{children:e.jsx("div",{className:"flex h-[calc(100vh-4rem)] items-center justify-center",children:e.jsx(ce,{className:"h-8 w-8 animate-spin text-primary"})})}):e.jsx(A,{children:e.jsxs("div",{className:"container mx-auto h-[calc(100vh-4rem)] space-y-6 overflow-hidden p-4 md:p-8 md:pt-6",children:[e.jsx("div",{className:"flex flex-col gap-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Orders"}),e.jsx(ke,{})]})}),e.jsx(Ie,{}),e.jsx($e,{}),e.jsx(Re,{}),e.jsx(ie,{}),e.jsx(_e,{}),e.jsx(ue,{})]})})}export{Ue as Orders};
